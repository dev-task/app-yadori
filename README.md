# Yadori - ä½ã¾ã„å£ã‚³ãƒŸSNS (ãƒ¢ãƒãƒ¬ãƒç‰ˆ)

[English](#english) | [æ—¥æœ¬èª](#japanese)

<a id="japanese"></a>
## æ—¥æœ¬èª

### ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Yadoriã¯ã€å®Ÿéš›ã«ä½ã‚“ã çµŒé¨“ã‚’ã‚‚ã¨ã«ã€ãƒªã‚¢ãƒ«ãªä½ã¾ã„æƒ…å ±ã‚’å…±æœ‰ãƒ»ç™ºè¦‹ã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚Webã‚¢ãƒ—ãƒªã¨ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚’ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã§é–‹ç™ºã—ã€ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨æ€§ã¨é–‹ç™ºåŠ¹ç‡ã‚’æœ€å¤§åŒ–ã—ã¦ã„ã¾ã™ã€‚

### âœ¨ ä¸»ãªæ©Ÿèƒ½

#### å…±é€šæ©Ÿèƒ½ï¼ˆWebãƒ»Mobileä¸¡å¯¾å¿œï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼**: ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
- **ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿**: ä½ã¾ã„ã®è©•ä¾¡ã€ã‚³ãƒ¡ãƒ³ãƒˆã€å†™çœŸã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **åœ°å›³ã‹ã‚‰ã®ä½æ‰€é¸æŠ**: Mapboxã‚’ä½¿ç”¨ã—ãŸç›´æ„Ÿçš„ãªä½ç½®é¸æŠ
- **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: æ§˜ã€…ãªæ¡ä»¶ã§ã®æ¤œç´¢ãŒå¯èƒ½
- **ã„ã„ã­æ©Ÿèƒ½**: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¸ã®ã€Œã„ã„ã­ã€
- **ã‚³ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½**: ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿
- **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®ç·¨é›†
- **å¤šè¨€èªå¯¾å¿œ**: æ—¥æœ¬èªã¨è‹±èªã®ã‚µãƒãƒ¼ãƒˆ
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³**: ãƒ¢ãƒã‚¤ãƒ«ã‹ã‚‰ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã¾ã§å¯¾å¿œ

#### Mobileå°‚ç”¨æ©Ÿèƒ½
- **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥**: ã„ã„ã­ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆé€šçŸ¥ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å—ä¿¡
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½**: ã„ã„ã­ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã®å³åº§åæ˜ 
- **ãƒã‚¤ãƒ†ã‚£ãƒ–åœ°å›³è¡¨ç¤º**: React Native Mapsä½¿ç”¨
- **ã‚«ãƒ¡ãƒ©ãƒ»ã‚®ãƒ£ãƒ©ãƒªãƒ¼é€£æº**: å†™çœŸæ’®å½±ãƒ»é¸æŠæ©Ÿèƒ½

### ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒ¢ãƒãƒ¬ãƒç®¡ç†
- **Turborepo**: åŠ¹ç‡çš„ãªãƒ“ãƒ«ãƒ‰ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Web**: Vite + React + TypeScript + Tailwind CSS
- **Mobile**: React Native + Expo + TypeScript
- **å…±é€šUI**: Tamagui (Webãƒ»Mobileä¸¡å¯¾å¿œ)

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚µãƒ¼ãƒ“ã‚¹
- **BaaS**: Supabase (PostgreSQL, Auth, Storage, Functions, Realtime)
- **åœ°å›³**: Mapbox GL JS, Mapbox Geocoding API
- **ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥**: Expo Push Notification Service
- **å›½éš›åŒ–**: React i18next

### ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
yadori-monorepo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                 # Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (Vite + React)
â”‚   â””â”€â”€ mobile/              # ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª (React Native + Expo)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/                  # å…±æœ‰UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª (Tamagui)
â”‚   â””â”€â”€ logic/               # å…±æœ‰ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ functions/           # Edge Functions (ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥)
â”œâ”€â”€ package.json             # ãƒ«ãƒ¼ãƒˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¨­å®š
â””â”€â”€ turbo.json              # Turborepoè¨­å®š
```

### ğŸ”§ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•

#### å‰ææ¡ä»¶

- Node.js (v18ä»¥ä¸Š)
- npm ã¾ãŸã¯ yarn
- Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Mapbox APIã‚­ãƒ¼
- Expo CLI (ãƒ¢ãƒã‚¤ãƒ«é–‹ç™ºç”¨)

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹
   ```bash
   git clone https://github.com/yourusername/yadori-monorepo.git
   cd yadori-monorepo
   ```

2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
   ```bash
   npm install
   ```

3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹
   - `.env.example`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.env`ã«ã‚³ãƒ”ãƒ¼ã—ã€å¿…è¦ãªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™
   ```bash
   cp .env.example .env
   ```
   - ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„:
     - `VITE_SUPABASE_URL`: Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®URL
     - `VITE_SUPABASE_ANON_KEY`: Supabaseã®åŒ¿åã‚­ãƒ¼
     - `VITE_MAPBOX_ACCESS_TOKEN`: Mapboxã®ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³API

4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹

   **å…¨ä½“ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•:**
   ```bash
   npm run dev
   ```

   **å€‹åˆ¥ã‚¢ãƒ—ãƒªã®é–‹ç™º:**
   ```bash
   # Webã‚¢ãƒ—ãƒªã®ã¿
   npm run dev --filter=@yadori/web
   
   # ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ã¿
   npm run dev --filter=@yadori/mobile
   ```

5. ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆWebï¼‰
   ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã¯Expo Goã‚¢ãƒ—ãƒªã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š

#### ãƒ“ãƒ«ãƒ‰æ–¹æ³•

**å…¨ä½“ã®ãƒ“ãƒ«ãƒ‰:**
```bash
npm run build
```

**å€‹åˆ¥ãƒ“ãƒ«ãƒ‰:**
```bash
# Webã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰
npm run build --filter=@yadori/web

# ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ï¼ˆExpoï¼‰
cd apps/mobile && expo build
```

### ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

- **users**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±
- **reviews**: ãƒ¬ãƒ“ãƒ¥ãƒ¼æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿ï¼ˆä½ç½®æƒ…å ±å«ã‚€ï¼‰
- **review_images**: ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒ
- **comments**: ã‚³ãƒ¡ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿
- **likes**: ã„ã„ã­æƒ…å ±
- **user_devices**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ç”¨ãƒ‡ãƒã‚¤ã‚¹æƒ…å ±

### ğŸ”” ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ 

ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã§ã¯ã€ä»¥ä¸‹ã®é€šçŸ¥ã‚’å—ä¿¡ã§ãã¾ã™ï¼š

1. **ã„ã„ã­é€šçŸ¥**: è‡ªåˆ†ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã„ã„ã­ãŒã¤ã„ãŸæ™‚
2. **ã‚³ãƒ¡ãƒ³ãƒˆé€šçŸ¥**: è‡ªåˆ†ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã‚³ãƒ¡ãƒ³ãƒˆãŒã¤ã„ãŸæ™‚

#### é€šçŸ¥ãƒ•ãƒ­ãƒ¼
1. ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ãƒ—ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ãƒ»ç™»éŒ²
2. ã„ã„ã­ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿æ™‚ã«Supabase Edge FunctionãŒãƒˆãƒªã‚¬ãƒ¼
3. Expo Push Serviceã‚’é€šã˜ã¦é€šçŸ¥é…ä¿¡

### ğŸŒ å¤šè¨€èªå¯¾å¿œ

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€`react-i18next`ã‚’ä½¿ç”¨ã—ã¦æ—¥æœ¬èªã¨è‹±èªã®ä¸¡æ–¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

#### è¨€èªãƒ•ã‚¡ã‚¤ãƒ«

ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã®å ´æ‰€ã«ã‚ã‚Šã¾ã™ï¼š
- æ—¥æœ¬èª: `packages/logic/src/locales/ja.json`
- è‹±èª: `packages/logic/src/locales/en.json`

### ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

#### Webç‰ˆ
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Netlify
- **ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰**: `npm run build --filter=@yadori/web`
- **å…¬é–‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `apps/web/dist`

#### Mobileç‰ˆ
- **ãƒ“ãƒ«ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹**: Expo Application Services (EAS)
- **é…ä¿¡**: App Store, Google Play Store

```bash
# EASè¨­å®š
cd apps/mobile
eas build --platform all

# é…ä¿¡
eas submit --platform all
```

### ğŸ“ é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# å…¨ä½“ã®é–‹ç™º
npm run dev

# å‹ãƒã‚§ãƒƒã‚¯
npm run type-check

# ãƒªãƒ³ãƒˆ
npm run lint

# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
npm run clean && npm run build
```

### ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®ã¯æ­“è¿ã—ã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã«å¾“ã£ã¦ãã ã•ã„:

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯ã™ã‚‹
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã™ã‚‹ (`git checkout -b feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ (`git commit -m 'Add some amazing feature'`)
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹

### ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

<a id="english"></a>
## English

### ğŸ“ Project Overview

Yadori is a platform where users can share and discover real housing information based on actual living experiences. Developed as a monorepo with Web and Mobile applications to maximize code reusability and development efficiency.

### âœ¨ Key Features

#### Common Features (Web & Mobile)
- **User Authentication**: Registration and login functionality
- **Review Posting**: Housing evaluations, comments, and photo uploads
- **Map-based Address Selection**: Intuitive location selection using Mapbox
- **Review Search & Filtering**: Search by various criteria
- **Like Functionality**: "Like" reviews
- **Comment Functionality**: Post comments on reviews
- **Profile Management**: Edit user profiles
- **Multilingual Support**: Japanese and English languages
- **Responsive Design**: Works from mobile to desktop

#### Mobile-Exclusive Features
- **Push Notifications**: Real-time notifications for likes and comments
- **Real-time Features**: Instant reflection of likes and comments
- **Native Map Display**: Using React Native Maps
- **Camera & Gallery Integration**: Photo capture and selection

### ğŸ› ï¸ Technology Stack

#### Monorepo Management
- **Turborepo**: Efficient build and cache management

#### Frontend
- **Web**: Vite + React + TypeScript + Tailwind CSS
- **Mobile**: React Native + Expo + TypeScript
- **Shared UI**: Tamagui (Web & Mobile compatible)

#### Backend & Services
- **BaaS**: Supabase (PostgreSQL, Auth, Storage, Functions, Realtime)
- **Maps**: Mapbox GL JS, Mapbox Geocoding API
- **Push Notifications**: Expo Push Notification Service
- **Internationalization**: React i18next

### ğŸ—ï¸ Project Structure

```
yadori-monorepo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                 # Web Application (Vite + React)
â”‚   â””â”€â”€ mobile/              # Mobile App (React Native + Expo)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/                  # Shared UI Library (Tamagui)
â”‚   â””â”€â”€ logic/               # Shared Business Logic
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ migrations/          # Database Migrations
â”‚   â””â”€â”€ functions/           # Edge Functions (Push Notifications)
â”œâ”€â”€ package.json             # Root Package Configuration
â””â”€â”€ turbo.json              # Turborepo Configuration
```

### ğŸ”§ Setup Instructions

#### Prerequisites

- Node.js (v18 or higher)
- npm or yarn
- Supabase account
- Mapbox API key
- Expo CLI (for mobile development)

#### Installation Steps

1. Clone the repository
   ```bash
   git clone https://github.com/yourusername/yadori-monorepo.git
   cd yadori-monorepo
   ```

2. Install dependencies
   ```bash
   npm install
   ```

3. Set up environment variables
   - Copy the `.env.example` file to `.env` and configure the necessary environment variables
   ```bash
   cp .env.example .env
   ```
   - Set the following environment variables:
     - `VITE_SUPABASE_URL`: Your Supabase project URL
     - `VITE_SUPABASE_ANON_KEY`: Your Supabase anonymous key
     - `VITE_MAPBOX_ACCESS_TOKEN`: Your Mapbox access token API

4. Start the development servers

   **Start all development servers:**
   ```bash
   npm run dev
   ```

   **Individual app development:**
   ```bash
   # Web app only
   npm run dev --filter=@yadori/web
   
   # Mobile app only
   npm run dev --filter=@yadori/mobile
   ```

5. Access the application
   - Web: http://localhost:5173
   - Mobile: Connect to development server via Expo Go app

#### Build Instructions

**Build all:**
```bash
npm run build
```

**Individual builds:**
```bash
# Web app build
npm run build --filter=@yadori/web

# Mobile app build (Expo)
cd apps/mobile && expo build
```

### ğŸ“Š Database Structure

- **users**: User profile information
- **reviews**: Review post data (including location information)
- **review_images**: Review images
- **comments**: Comment data
- **likes**: Like information
- **user_devices**: Device information for push notifications

### ğŸ”” Push Notification System

The mobile app can receive the following notifications:

1. **Like Notifications**: When someone likes your review
2. **Comment Notifications**: When someone comments on your review

#### Notification Flow
1. Push token acquisition and registration on mobile app startup
2. Supabase Edge Function triggers on like/comment posting
3. Notification delivery through Expo Push Service

### ğŸŒ Internationalization

This application supports both Japanese and English using `react-i18next`.

#### Language Files

Translation files are located at:
- Japanese: `packages/logic/src/locales/ja.json`
- English: `packages/logic/src/locales/en.json`

### ğŸš€ Deployment

#### Web Version
- **Platform**: Netlify
- **Build Command**: `npm run build --filter=@yadori/web`
- **Publish Directory**: `apps/web/dist`

#### Mobile Version
- **Build Service**: Expo Application Services (EAS)
- **Distribution**: App Store, Google Play Store

```bash
# EAS setup
cd apps/mobile
eas build --platform all

# Submit
eas submit --platform all
```

### ğŸ“ Development Commands

```bash
# Development for all
npm run dev

# Type checking
npm run type-check

# Linting
npm run lint

# Clean build
npm run clean && npm run build
```

### ğŸ¤ Contributing

Contributions to the project are welcome. Please follow these steps:

1. Fork this repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Create a Pull Request

### ğŸ“„ License

This project is released under the MIT License.