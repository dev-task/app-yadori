# 住まい口コミ SNS 開発タスク

## 完了済みタスク

### REVIEW-1: 基本的なプロジェクト構造と Supabase 接続

-   [x] Vite + React + TypeScript 環境の構築
-   [x] Tailwind CSS の設定
-   [x] Supabase クライアントの設定
-   [x] 基本的なフォルダ構造の作成

### REVIEW-2: 認証システムの実装

-   [x] AuthContext の作成
-   [x] ログイン・新規登録フォームの実装
-   [x] Supabase Auth との連携
-   [x] 認証状態の管理

### REVIEW-3: レビュー投稿機能の実装

-   [x] PostPage コンポーネントの作成
-   [x] フォームバリデーション
-   [x] 画像アップロード機能
-   [x] Supabase Storage との連携
-   [x] レビューデータの保存

### REVIEW-4: レビュー一覧・詳細表示機能

-   [x] ReviewCard コンポーネントの作成
-   [x] HomePage での最新レビュー表示
-   [x] ReviewListPage での検索・フィルター機能
-   [x] ReviewDetailPage での詳細表示
-   [x] ページネーション機能

### REVIEW-5: いいね機能の実装

-   [x] いいねボタンの実装
-   [x] いいね数の表示
-   [x] リアルタイムでのいいね数更新
-   [x] ユーザーごとのいいね状態管理

### REVIEW-6: コメント機能の実装

-   [x] CommentSection コンポーネントの作成
-   [x] コメントの投稿・編集・削除機能
-   [x] リアルタイムでのコメント数更新
-   [x] コメント投稿時の通知機能（トリガー）

### REVIEW-7: プロフィールページの実装

-   [x] ProfilePage コンポーネントの作成
-   [x] ユーザー統計情報の表示
-   [x] プロフィール編集機能
-   [x] ユーザーが投稿したレビュー一覧
-   [x] アカウント設定機能

### REVIEW-8: データベース最適化とマイグレーション修正

-   [x] ユーザープロフィール制約の追加
-   [x] インデックスの最適化
-   [x] RLS ポリシーの改善
-   [x] ユーザー統計ビューの作成
-   [x] SQL 構文エラーの修正

## 技術スタック

-   **フロントエンド**: React 18, TypeScript, Tailwind CSS
-   **バックエンド**: Supabase (PostgreSQL, Auth, Storage)
-   **ルーティング**: React Router DOM
-   **アイコン**: Lucide React
-   **ビルドツール**: Vite

## データベース構造

-   **users**: ユーザープロフィール情報
-   **reviews**: レビュー投稿データ
-   **review_images**: レビュー画像
-   **comments**: コメントデータ
-   **likes**: いいね情報
-   **chat_histories**: チャット履歴（将来の拡張用）

## 主要機能

1. ユーザー認証（登録・ログイン）
2. レビュー投稿（画像アップロード対応）
3. レビュー検索・フィルタリング
4. いいね機能
5. コメント機能
6. プロフィール管理
7. レスポンシブデザイン

## UI/UX 刷新 & 国際化対応タスク

### UI/UX 刷新タスク (Spotify 風デザイン)

#### UI-1: デザインシステムの定義とダークテーマの導入

-   [ ] **Tailwind CSS 設定更新:** `tailwind.config.js`にカラーパレット（ダークテーマ用の黒、グレー、アクセントカラー）、フォント、スペーシングなどのデザイントークンを定義する。
-   [ ] **グローバル CSS 修正:** `globals.css`で、デフォルトの背景色や文字色をダークテーマに設定する。
-   [ ] **レイアウトコンポーネント作成:** アプリ全体のレイアウトの基盤となる`MainLayout.tsx`を作成・更新し、サイドバーやヘッダーの領域を確保する。

#### UI-2: 主要コンポーネントの再設計

-   [ ] **ナビゲーションの再設計:** サイドバーまたはヘッダーを Spotify 風のシンプルで直感的なナビゲーションに更新する。
-   [ ] **ReviewCard の再設計:** レビュー一覧で表示される`ReviewCard.tsx`を、画像が際立つモダンなデザインに変更する。ホバーエフェクトを追加する。
-   [ ] **ボタン・フォームの再設計:** アプリ全体で使用するボタンや入力フォームのデザインを、定義したカラーパレットに合わせて統一する。

#### UI-3: 主要ページのレイアウト更新

-   [ ] **ホームページのレイアウト更新:** グリッドレイアウトを採用し、複数のレビューカードを整然と表示する。
-   [ ] **レビュー詳細ページのレイアウト更新:** `ReviewDetailPage`のコンポーネント配置を見直し、情報階層を明確にする。
-   [ ] **プロフィールページのレイアウト更新:** `ProfilePage`のデザインを刷新し、統計情報や投稿一覧を見やすくする。

### 国際化(i18n)対応タスク

#### I18N-1: ライブラリ導入と設定

-   [ ] **`next-intl`のインストール:** `npm install next-intl`を実行する。
-   [ ] **ミドルウェアの設定:** `middleware.ts`を作成し、リクエストのパス名に基づいてロケール（言語）を判断するように設定する。
-   [ ] **翻訳ファイルの作成:** メッセージを格納する`messages/en.json`と`messages/ja.json`を作成する。
-   [ ] **プロバイダの設定:** ルートレイアウトで`NextIntlClientProvider`を設定し、アプリケーション全体で翻訳機能を使えるようにする。

#### I18N-2: 静的テキストの多言語対応

-   [ ] **主要コンポーネントの翻訳:** ヘッダー、フッター、ナビゲーションなどの共通コンポーネント内の静的テキストを`useTranslations`フックを使って多言語化する。
-   [ ] **各ページの翻訳:** ホームページ、ログインページ、レビュー投稿ページなどのタイトルやラベルを多言語化する。

#### I18N-3: 動的コンテンツ・設定機能の実装

-   [ ] **言語切り替え機能の実装:** 設定ページに、`useLocale`と`router.replace`を使って言語を切り替える UI（ドロップダウン等）を実装する。
-   [ ] **データベースコンテンツの考慮:** （将来的な拡張）ユーザーが投稿するレビュー内容など、動的なコンテンツの翻訳をどう扱うか方針を決定する。（今回は静的テキストのみを対象）

## 今後の拡張予定

-   リアルタイム通知機能
-   地図表示機能
-   レビューの詳細検索
-   ユーザーフォロー機能
-   レビューの共有機能
