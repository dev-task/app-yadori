# 住まい口コミ SNS 開発タスク

## 完了済みタスク

### REVIEW-1: 基本的なプロジェクト構造と Supabase 接続

-   [x] Vite + React + TypeScript 環境の構築
-   [x] Tailwind CSS の設定
-   [x] Supabase クライアントの設定
-   [x] 基本的なフォルダ構造の作成

### REVIEW-2: 認証システムの実装

-   [x] AuthContext の作成
-   [x] ログイン・新規登録フォームの実装
-   [x] Supabase Auth との連携
-   [x] 認証状態の管理

### REVIEW-3: レビュー投稿機能の実装

-   [x] PostPage コンポーネントの作成
-   [x] フォームバリデーション
-   [x] 画像アップロード機能
-   [x] Supabase Storage との連携
-   [x] レビューデータの保存

### REVIEW-4: レビュー一覧・詳細表示機能

-   [x] ReviewCard コンポーネントの作成
-   [x] HomePage での最新レビュー表示
-   [x] ReviewListPage での検索・フィルター機能
-   [x] ReviewDetailPage での詳細表示
-   [x] ページネーション機能

### REVIEW-5: いいね機能の実装

-   [x] いいねボタンの実装
-   [x] いいね数の表示
-   [x] リアルタイムでのいいね数更新
-   [x] ユーザーごとのいいね状態管理

### REVIEW-6: コメント機能の実装

-   [x] CommentSection コンポーネントの作成
-   [x] コメントの投稿・編集・削除機能
-   [x] リアルタイムでのコメント数更新
-   [x] コメント投稿時の通知機能（トリガー）

### REVIEW-7: プロフィールページの実装

-   [x] ProfilePage コンポーネントの作成
-   [x] ユーザー統計情報の表示
-   [x] プロフィール編集機能
-   [x] ユーザーが投稿したレビュー一覧
-   [x] アカウント設定機能

### REVIEW-8: データベース最適化とマイグレーション修正

-   [x] ユーザープロフィール制約の追加
-   [x] インデックスの最適化
-   [x] RLS ポリシーの改善
-   [x] ユーザー統計ビューの作成
-   [x] SQL 構文エラーの修正

## 技術スタック

-   **フロントエンド**: React 18, TypeScript, Tailwind CSS
-   **バックエンド**: Supabase (PostgreSQL, Auth, Storage)
-   **ルーティング**: React Router DOM
-   **アイコン**: Lucide React
-   **ビルドツール**: Vite

## データベース構造

-   **users**: ユーザープロフィール情報
-   **reviews**: レビュー投稿データ
-   **review_images**: レビュー画像
-   **comments**: コメントデータ
-   **likes**: いいね情報
-   **chat_histories**: チャット履歴（将来の拡張用）

## 主要機能

1. ユーザー認証（登録・ログイン）
2. レビュー投稿（画像アップロード対応）
3. レビュー検索・フィルタリング
4. いいね機能
5. コメント機能
6. プロフィール管理
7. レスポンシブデザイン

## UI/UX刷新タスク (Spotify風デザイン)

### UI-1: デザインシステムの定義とダークテーマの導入
- [ ] **Tailwind CSS設定更新:** `tailwind.config.js`にカラーパレット、フォント等のデザイントークンを定義。
- [ ] **グローバルCSS修正:** `globals.css`で、デフォルトの背景色や文字色をダークテーマに設定。
- [ ] **レイアウトコンポーネント作成:** `MainLayout.tsx`を作成・更新。

### UI-2: 主要コンポーネントの再設計
- [ ] **ナビゲーションの再設計:** サイドバーまたはヘッダーをSpotify風のUIに更新。
- [ ] **ReviewCardの再設計:** レビュー一覧カードをモダンなデザインに変更し、ホバーエフェクトを追加。
- [ ] **ボタン・フォームの再設計:** アプリ全体で使用するボタンやフォームのデザインを統一。

### UI-3: 主要ページのレイアウト更新
- [ ] **ホームページのレイアウト更新:** グリッドレイアウトを採用。
- [ ] **レビュー詳細ページのレイアウト更新:** 情報階層を明確にする。
- [ ] **プロフィールページのレイアウト更新:** 統計情報や投稿一覧を見やすくする。

## 国際化(i18n)対応タスク

### I18N-1: ライブラリ導入と設定
- [ ] **`next-intl`のインストール**
- [ ] **ミドルウェアの設定 (`middleware.ts`)**
- [ ] **翻訳ファイルの作成 (`messages/en.json`, `messages/ja.json`)**
- [ ] **プロバイダの設定 (`NextIntlClientProvider`)**

### I18N-2: 静的テキストの多言語対応
- [ ] **主要コンポーネントの翻訳:** ヘッダー、フッター、ナビゲーション等。
- [ ] **各ページの翻訳:** ホームページ、ログインページ、投稿ページ等。

### I18N-3: 動的コンテンツ・設定機能の実装
- [ ] **言語切り替え機能の実装:** 設定ページにUIを実装。
- [ ] **データベースコンテンツの考慮:** (将来的な拡張)

## 地図からの住所選択機能タスク

### MAP-1: 地図選択モーダルのUIコンポーネント作成
- [ ] **ボタンの作成:** 「地図で選択」ボタンコンポーネントを作成。
- [ ] **モーダルコンポーネントの作成:** 地図と検索バーを含むモーダルの骨格を作成。

### MAP-2: モーダル内への地図表示
- [ ] **Mapboxの組み込み:** モーダル内に地図を正しく表示させる。
- [ ] **APIキーの設定:** 環境変数にAPIキーを設定。
- [ ] **ピンの初期表示:** ドラッグ可能なピンを地図上に表示。

### MAP-3: 住所検索機能（ジオコーディング）の実装
- [ ] **APIクライアント設定:** Geocoding APIを呼び出す関数を準備。
- [ ] **検索処理の実装:** 入力値でAPIを呼び出し、候補を取得。
- [ ] **地図の移動:** 検索結果の座標に地図とピンを移動させる。

### MAP-4: 住所の自動入力機能（リバースジオコーディング）の実装
- [ ] **座標の取得:** ピンの位置情報を取得。
- [ ] **API呼び出し:** 座標から住所文字列を取得。
- [ ] **フォームへの反映:** 親フォームのフィールドを更新しモーダルを閉じる。

## 今後の拡張予定
- リアルタイム通知機能
- レビューの詳細検索
- ユーザーフォロー機能
- レビューの共有機能
